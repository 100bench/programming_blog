# Programming Blog Go

## Описание проекта

**Programming Blog Go** — это веб-приложение для ведения блога, переписанное с Python/Django на Go. Проект разработан с использованием принципов **чистой архитектуры (Clean Architecture)**, что обеспечивает высокую модульность, тестируемость, масштабируемость и легкость в поддержке. Приложение позволяет публиковать статьи, управлять категориями, регистрировать пользователей, авторизоваться с помощью JWT и отправлять контактные сообщения.

## Ключевые особенности

*   **Публикация и управление статьями:** Создание, просмотр (по одной или списком), фильтрация по категориям.
*   **Управление категориями:** Создание и привязка статей к категориям.
*   **Пользовательская система:** Регистрация, вход в систему с использованием JWT-токенов.
*   **Контактная форма:** Отправка сообщений через форму обратной связи.
*   **Веб-интерфейс:** Отображение статей и форм с использованием нативного Go `html/template`.

## Сильные стороны проекта (Архитектурные особенности)

Этот проект разработан с упором на современные архитектурные паттерны и лучшие практики, что делает его крайне надежным и расширяемым:

1.  **Чистая архитектура (Clean Architecture):**
    *   **Разделение ответственности:** Четкое разделение на слои `Domain` (бизнес-сущности и правила), `Use Case` (логика приложения), `Adapters` (реализации внешних деталей) и `Infrastructure` (фреймворки и базы данных). Это минимизирует зависимость ядра приложения от внешних фреймворков и баз данных.
    *   **Модульность:** Каждый компонент выполняет одну, четко определенную функцию, что упрощает понимание и изменение кода.
    *   **Тестируемость:** Благодаря слабой связанности слоев, каждый компонент (особенно `Domain` и `Use Case`) легко тестировать в изоляции, без необходимости поднимать базу данных или веб-сервер.
    *   **Поддерживаемость:** Изменения в одном слое минимально влияют на другие, что снижает риск ошибок при развитии проекта.
    *   **Масштабируемость:** Архитектура позволяет легко заменять или масштабировать отдельные компоненты (например, сменить базу данных или SMTP-сервис), не затрагивая основную бизнес-логику.

2.  **Эффективность и Производительность Go:**
    *   Использование языка Go обеспечивает высокую производительность, низкое потребление ресурсов и отличные возможности для работы с конкурентностью, что идеально подходит для веб-сервисов.

3.  **Выбранные технологии:**
    *   **Gin Gonic (веб-фреймворк):** Быстрый, легковесный и мощный фреймворк для создания HTTP API и веб-приложений на Go.
    *   **PostgreSQL (база данных):** Надежная, мощная и функциональная реляционная база данных, обеспечивающая целостность и сохранность данных.
    *   **GORM (ORM):** Удобный и функциональный ORM для Go, упрощающий взаимодействие с PostgreSQL и абстрагирующий детали работы с SQL.
    *   **JWT (JSON Web Tokens):** Современный и безопасный метод аутентификации без сохранения состояния, что позволяет легко масштабировать API-сервисы.
    *   **Go HTML Templates:** Использование нативного шаблонизатора Go обеспечивает хорошую производительность и простоту при рендеринге HTML-страниц.

4.  **Централизованная обработка ошибок и конфигурации:**
    *   Отдельный пакет `config` для всех настроек и централизованный `error_handler.go` для преобразования внутренних ошибок в стандартные HTTP-ответы значительно улучшают консистентность и удобство отладки.

5.  **Безопасность (хеширование паролей):**
    *   Пароли пользователей хешируются с использованием `bcrypt`, что является стандартной и безопасной практикой для хранения учетных данных.

## Начало работы

### 1. Требования

*   Go 1.18+
*   PostgreSQL

### 2. Клонирование репозитория

```bash
git clone <URL_ВАШЕГО_РЕПОЗИТОРИЯ>
cd programming_blog_go
```

### 3. Настройка переменных окружения

Создайте файл `.env` в корневой директории проекта `programming_blog_go/` со следующим содержимым, заменив значения на свои:

```dotenv
DB_HOST=localhost
DB_USER=youruser
DB_PASSWORD=yourpassword
DB_NAME=yourdatabase
DB_PORT=5432

SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USERNAME=your_smtp_username
SMTP_PASSWORD=your_smtp_password
SMTP_FROM=noreply@example.com

JWT_SECRET=supersecretjwtkey_replace_with_a_strong_one
PORT=8080
```

**Важно:** Убедитесь, что `JWT_SECRET` — это длинная, случайная и безопасная строка.

### 4. Настройка базы данных PostgreSQL

1.  Создайте базу данных и пользователя PostgreSQL, соответствующие вашим настройкам в `.env`.
2.  Примените начальные миграции, выполнив SQL-скрипт:
    ```bash
    psql -h <DB_HOST> -U <DB_USER> -d <DB_NAME> -f internal/adapter/persistence/postgres/migrations/0001_initial.up.sql
    ```
    (Замените `<DB_HOST>`, `<DB_USER>`, `<DB_NAME>` на ваши данные.)

### 5. Установка зависимостей

```bash
go mod tidy
```

### 6. Запуск приложения

```bash
go run cmd/main.go
```

Приложение будет доступно по адресу `http://localhost:8080` (или на другом порту, указанном в `.env`).

## Структура проекта (Clean Architecture)

```
programming_blog_go/
├── cmd/                  # Точка входа в приложение
│   └── main.go
├── config/               # Управление конфигурацией
│   └── config.go
├── internal/             # Внутренняя логика приложения (чистая архитектура)
│   ├── adapter/          # Адаптеры к внешним деталям (БД, веб, сервисы)
│   │   ├── handler/      # HTTP-обработчики (Gin-контроллеры)
│   │   ├── persistence/  # Реализации репозиториев (GORM, PostgreSQL)
│   │   └── service/      # Реализации внешних сервисов (например, SMTP)
│   ├── domain/           # Ядро домена (сущности, интерфейсы, ошибки)
│   ├── middleware/       # Middleware-функции (JWT, контекст категорий)
│   ├── usecase/          # Сценарии использования / бизнес-логика
│   └── utils/            # Общие утилиты (контекст, пароли)
├── web/                  # Веб-ресурсы
│   ├── static/           # Статические файлы (CSS)
│   └── templates/        # HTML-шаблоны
└── go.mod                # Модуль Go
└── go.sum                # Контрольные суммы зависимостей
```

## Будущие улучшения

*   **Расширенное логирование:** Интеграция с библиотеками логирования (например, `logrus` или `zap`).
*   **Метрики и мониторинг:** Добавление эндпоинтов для метрик (например, Prometheus) и health checks.
*   **Dockerization:** Создание Dockerfile для простой контейнеризации и развертывания.
*   **Авторизация на основе ролей:** Расширение JWT-токенов для включения информации о ролях пользователя и реализации более детальных правил доступа.
*   **Обработка изображений:** Загрузка и управление изображениями для статей.
*   **Покрытие тестами:** Добавление юнит- и интеграционных тестов для всех слоев приложения.
